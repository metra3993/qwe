{% extends 'base.html' %}

{% block title %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ - –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="mb-3">
        <a href="{% url 'dashboard:products_list' %}" class="text-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤</a>
    </div>

    <h1 class="mb-4">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: {{ product.name }}</h1>

    <div style="max-width: 900px;">
        <form method="post">
            {% csrf_token %}

            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="mb-3">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>

                    <div class="grid grid-2">
                        <div class="form-group">
                            <label for="category" class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                            <select name="category" id="category" class="form-control" required>
                                {% for cat in categories %}
                                    <option value="{{ cat.pk }}" {% if product.category.pk == cat.pk %}selected{% endif %}>
                                        {{ cat.icon }} {{ cat.name }}
                                    </option>
                                {% endfor %}
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="name" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ *</label>
                            <input type="text" id="name" name="name" class="form-control" value="{{ product.name }}" required>
                        </div>

                        <div class="form-group">
                            <label for="brand" class="form-label">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å/–ë—Ä–µ–Ω–¥</label>
                            <input type="text" id="brand" name="brand" class="form-control" value="{{ product.brand }}">
                        </div>

                        <div class="form-group">
                            <label for="country_origin" class="form-label">–°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏—è</label>
                            <input type="text" id="country_origin" name="country_origin" class="form-control" value="{{ product.country_origin }}">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="mb-3">–¶–µ–Ω–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</h3>

                    <div class="grid grid-2">
                        <div class="form-group">
                            <label for="price" class="form-label">–¶–µ–Ω–∞ (‚ÇΩ) *</label>
                            <input type="number" id="price" name="price" class="form-control" value="{{ product.price }}" step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label for="discount_percent" class="form-label">–°–∫–∏–¥–∫–∞ (%)</label>
                            <input type="number" id="discount_percent" name="discount_percent" class="form-control" value="{{ product.discount_percent }}" min="0" max="100">
                            <small class="text-secondary">–ï—Å–ª–∏ —Å–∫–∏–¥–∫–∞ > 0, —Ü–µ–Ω–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ—á–µ—Ä–∫–Ω—É—Ç–∞</small>
                        </div>

                        <div class="form-group">
                            <label for="quantity" class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ/–í–µ—Å *</label>
                            <input type="number" id="quantity" name="quantity" class="form-control" value="{{ product.quantity }}" step="0.01" required>
                        </div>

                        <div class="form-group">
                            <label for="unit" class="form-label">–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è *</label>
                            <select name="unit" id="unit" class="form-control" required>
                                <option value="kg" {% if product.unit == 'kg' %}selected{% endif %}>–∫–≥</option>
                                <option value="g" {% if product.unit == 'g' %}selected{% endif %}>–≥</option>
                                <option value="l" {% if product.unit == 'l' %}selected{% endif %}>–ª</option>
                                <option value="ml" {% if product.unit == 'ml' %}selected{% endif %}>–º–ª</option>
                                <option value="pcs" {% if product.unit == 'pcs' %}selected{% endif %}>—à—Ç</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="stock" class="form-label">–û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ (—à—Ç) *</label>
                            <input type="number" id="stock" name="stock" class="form-control" value="{{ product.stock }}" min="0" required>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="mb-3">–û–ø–∏—Å–∞–Ω–∏–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h3>

                    <div class="form-group">
                        <label for="description" class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="description" name="description" class="form-control" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞">{{ product.description }}</textarea>
                    </div>

                    <div class="form-group">
                        <label for="ingredients" class="form-label">–°–æ—Å—Ç–∞–≤</label>
                        <textarea id="ingredients" name="ingredients" class="form-control" rows="3" placeholder="–°–ø–∏—Å–æ–∫ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤">{{ product.ingredients }}</textarea>
                    </div>

                    <div class="form-group">
                        <label for="nutritional_value" class="form-label">–ü–∏—â–µ–≤–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å</label>
                        <textarea id="nutritional_value" name="nutritional_value" class="form-control" rows="3" placeholder="–ö–∞–ª–æ—Ä–∏–∏, –±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã –Ω–∞ 100–≥">{{ product.nutritional_value }}</textarea>
                    </div>

                    <div class="grid grid-2">
                        <div class="form-group">
                            <label for="expiry_date" class="form-label">–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏</label>
                            <input type="text" id="expiry_date" name="expiry_date" class="form-control" value="{{ product.expiry_date }}" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 12 –º–µ—Å—è—Ü–µ–≤">
                        </div>

                        <div class="form-group">
                            <label for="storage_conditions" class="form-label">–£—Å–ª–æ–≤–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è</label>
                            <input type="text" id="storage_conditions" name="storage_conditions" class="form-control" value="{{ product.storage_conditions }}" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—É—Ö–æ–º –º–µ—Å—Ç–µ">
                        </div>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-body">
                    <h3 class="mb-3">–°—Ç–∞—Ç—É—Å—ã –∏ –º–µ—Ç–∫–∏</h3>

                    <div class="grid grid-2">
                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="is_available" {% if product.is_available %}checked{% endif %}>
                                <span>‚úÖ –í –Ω–∞–ª–∏—á–∏–∏</span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="is_featured" {% if product.is_featured %}checked{% endif %}>
                                <span>‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π</span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="is_new" {% if product.is_new %}checked{% endif %}>
                                <span>üÜï –ù–æ–≤–∏–Ω–∫–∞</span>
                            </label>
                        </div>

                        <div class="form-group">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox" name="is_organic" {% if product.is_organic %}checked{% endif %}>
                                <span>üå± –û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–¥—É–∫—Ç</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div style="display: flex; gap: 12px;">
                <button type="submit" class="btn btn-primary" style="padding: 12px 32px;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                <a href="{% url 'dashboard:products_list' %}" class="btn" style="padding: 12px 32px;">–û—Ç–º–µ–Ω–∞</a>
                <a href="{% url 'dashboard:product_delete' product.pk %}" class="btn btn-danger" style="margin-left: auto; padding: 12px 32px;">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç</a>
            </div>
        </form>
    </div>
</div>

<style>
.btn-danger {
    background: var(--color-danger);
    color: white;
}

.btn-danger:hover {
    background: #c62828;
}
</style>
{% endblock %}
